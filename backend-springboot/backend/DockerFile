FROM eclipse-temurin:21-jdk-jammy

WORKDIR /app

# Install Maven (replace with your needed version)
RUN apt-get update && apt-get install -y maven

# Copy only necessary files
COPY pom.xml .
COPY src ./src

# Build using system Maven
RUN mvn clean package -DskipTests

# Optimized for Render's free tier (256MB RAM)
CMD ["java", "-Xmx128m", "-XX:MaxRAM=256m", "-jar", "target/backend-0.0.1-SNAPSHOT.jar"] 
